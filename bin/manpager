#!/usr/bin/env bash
has_cmd() {
	for opt in "$@"; do
		command -v "$opt" >/dev/null
	done
}

if [ -t 0 ]; then
	# mandoc
	if has_cmd col bat; then
		col -bx <"${!#}" | eval "bat --color=always -plman ${*:1:$#-1}"
	else
		cat "${!#}"
	fi
else
	# man-db
	if has_cmd col bat; then
		col -bx | eval "bat --color=always -plman ${*//\\/\\\\}"
	else
		cat
	fi
fi
